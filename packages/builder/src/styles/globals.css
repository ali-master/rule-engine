@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  
  /* Rule Engine Specific */
  --color-rule-or: hsl(var(--rule-or));
  --color-rule-or-bg: hsl(var(--rule-or-bg));
  --color-rule-and: hsl(var(--rule-and));
  --color-rule-and-bg: hsl(var(--rule-and-bg));
  --color-rule-none: hsl(var(--rule-none));
  --color-rule-none-bg: hsl(var(--rule-none-bg));
}

:root {
  /* Colors */
  --background: 0 0% 100%;
  --foreground: 240 10% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 240 10% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 240 10% 3.9%;
  --primary: 240 5.9% 10%;
  --primary-foreground: 0 0% 98%;
  --secondary: 240 4.8% 95.9%;
  --secondary-foreground: 240 5.9% 10%;
  --muted: 240 4.8% 95.9%;
  --muted-foreground: 240 3.8% 46.1%;
  --accent: 240 4.8% 95.9%;
  --accent-foreground: 240 5.9% 10%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 5.9% 90%;
  --input: 240 5.9% 90%;
  --ring: 240 5.9% 10%;
  --radius: 0.5rem;

  /* Rule Engine Specific */
  --rule-or: 217 91% 60%;
  --rule-or-bg: 217 91% 96%;
  --rule-and: 142 71% 45%;
  --rule-and-bg: 142 71% 95%;
  --rule-none: 0 84% 60%;
  --rule-none-bg: 0 84% 95%;
}

.dark {
  --background: 240 10% 3.9%;
  --foreground: 0 0% 98%;
  --card: 240 10% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 240 10% 3.9%;
  --popover-foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 240 5.9% 10%;
  --secondary: 240 3.7% 15.9%;
  --secondary-foreground: 0 0% 98%;
  --muted: 240 3.7% 15.9%;
  --muted-foreground: 240 5% 64.9%;
  --accent: 240 3.7% 15.9%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 3.7% 15.9%;
  --input: 240 3.7% 15.9%;
  --ring: 240 4.9% 83.9%;

  /* Rule Engine Specific */
  --rule-or: 217 91% 60%;
  --rule-or-bg: 217 91% 15%;
  --rule-and: 142 71% 45%;
  --rule-and-bg: 142 71% 15%;
  --rule-none: 0 84% 60%;
  --rule-none-bg: 0 84% 15%;
}

@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

@utility scrollbar {
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-secondary;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-muted-foreground/30 rounded;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/50;
  }
}

@utility radix-fixes {
  /* Fix for Radix UI popover/select backgrounds */
  [data-radix-popper-content-wrapper] {
    @apply z-50;
  }

  /* Select dropdown specific fixes */
  [role="listbox"] {
    background-color: hsl(var(--popover)) !important;
  }

  [data-radix-select-content] {
    background-color: hsl(var(--popover)) !important;
  }

  [data-radix-select-viewport] {
    background-color: transparent !important;
  }

  [data-radix-select-item] {
    @apply bg-transparent;
  }

  [data-radix-select-item][data-highlighted] {
    @apply bg-accent text-accent-foreground;
  }
}

/* Animation classes */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideIn {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out;
}

.animate-slideIn {
  animation: slideIn 0.3s ease-out;
}

@utility command-palette {
  /* Command palette styles */
  [cmdk-root] {
    @apply bg-popover;
  }

  [cmdk-input] {
    @apply bg-transparent;
  }

  [cmdk-item] {
    @apply bg-transparent;
  }

  [cmdk-item][data-selected="true"] {
    @apply bg-accent text-accent-foreground;
  }
}

@utility rule-builder {
  /* Rule builder specific styles */
  .rule-depth-indicator {
    @apply absolute left-0 top-0 bottom-0 w-[3px] bg-gradient-to-b from-primary/80 to-primary/20;
  }

  .rule-path {
    @apply font-mono text-xs text-muted-foreground;
  }
}

@utility rule-indents {
  /* Nested rule indentation */
  .rule-indent-1 { @apply pl-4; }
  .rule-indent-2 { @apply pl-8; }
  .rule-indent-3 { @apply pl-12; }
  .rule-indent-4 { @apply pl-16; }
  .rule-indent-5 { @apply pl-20; }
  .rule-indent-deep {
    @apply pl-24 border-l-2 border-dashed border-border;
  }
}
